<!--components/comment/index.wxml-->
<view class="comments-container">
  <!-- Comment Input Section -->
    <!-- <view wx:if="{{hasLogin}}" class="input-container">
      <image class="avatar" src="{{userLocal.avatar}}"></image>
      <input class="input-comment" placeholder="说点什么……" bindinput="inputComment" value="{{inputValue}}"/>
      <button class="send-button" bindtap="sendComment" ></button>
    </view> -->
    <block wx:for="{{commentVoList}}" wx:key="unique">
        <view class="parent comment">
            <view class="wrap">
            <image class="avatar" bind:tap="goToUser" src="{{item.userInfo.avatarUrl}}" />
            <view class="comment-details" bind:tap="replyComment">
                <text class="username">{{item.userInfo.userName}}:</text>
                <text class="comment-text">{{item.content}}</text>
                <text class="comment-time">{{item.addTime}}</text>
            </view>
            </view>
            <!-- 子评论 -->
            <view class="child-comments">
                <block wx:for="{{item.childComments}}" wx:for-item="child" wx:for-index="cIndex" wx:key="unique">
                    <view class="comment child-comment" >
                        <view class="wrap" style="display: flex;">
                        <image class="avatar" src="{{child.userInfo.avatarUrl}}" />
                        <view class="comment-details"  bind:tap="replyComment">
                            <text class="username">{{child.userInfo.userName}}<text style="color:#999"> 回复 {{child.child.toCommentUser}}</text> :</text>
                            <text class="comment-text">{{child.child.content}}</text>
                            <text class="comment-time">{{child.child.addTime}}</text>
                        </view>
                        </view>
                    </view>
                </block>
            </view>
        </view>
    </block>
    <!-- 回复按钮 -->
    <view class="overlay" bind:tap="hideview" wx:if="{{showInput}}"></view>
      <view wx:if="{{showInput}}" class="input-area" style="display: flex;">
       <input focus="{{true}}"	adjust-position="{{true}}" type="text" confirm-type="send" class="reply-input" placeholder="写回复..." bindinput="replyInput" model:value="{{reply}}" />
       <button size="mini" type="primary" bindtap="sendReply" data-id="{{item.id}}">发送</button>
    </view>
</view>
